---
node.name: "{{ inventory_hostname }}"

log.level: {{ logstash_loglevel }}
path.logs: /usr/share/logstash/logs
path.data: /usr/share/logstash/data
path.dead_letter_queue: "/usr/share/logstash/logs/dead_letter_queue"

dead_letter_queue.enable: true
dead_letter_queue.max_bytes: 1024mb
dead_letter_queue.flush_interval: {{ logstash_dead_letter_queue_flush_interval }}
dead_letter_queue.retain.age: {{ logstash_dead_letter_queue_retain_age }}

xpack.monitoring.enabled: true
xpack.monitoring.elasticsearch.hosts: ["https://{{ hostvars[groups['BDA'][0]]['ansible_default_ipv4']['address'] }}:9200"]
xpack.monitoring.elasticsearch.api_key: "{{ elasticsearch_api_key }}"
xpack.monitoring.elasticsearch.ssl.certificate_authority: "/usr/share/logstash/config/certs/ca.crt"
xpack.monitoring.elasticsearch.ssl.verification_mode: none

xpack.management.enabled: true
xpack.management.pipeline.id: ["*"]
xpack.management.elasticsearch.hosts: ["https://{{ hostvars[groups['BDA'][0]]['ansible_default_ipv4']['address'] }}:9200"]
xpack.management.elasticsearch.api_key: "{{ elasticsearch_api_key }}"
xpack.management.elasticsearch.ssl.certificate_authority: "/usr/share/logstash/config/certs/ca.crt"
xpack.management.elasticsearch.ssl.verification_mode: none

api.http.host: 0.0.0.0
api.http.port: 9600
